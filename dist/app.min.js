var NoahsApp=angular.module("NoahsApp",["ui.router"]);NoahsApp.config(["$stateProvider","$urlRouterProvider",function(o,e){e.otherwise("/"),o.state("main",{url:"/",templateUrl:"app/components/main/main.html",controller:"MainController",controllerAs:"main"}).state("map",{url:"/map",templateUrl:"app/components/map/map.html",controller:"MapController",controllerAs:"map"}).state("pump",{url:"/pump/:id",templateUrl:"app/components/pump/pump.html",controller:"PumpController",controllerAs:"pump"})}]),NoahsApp.service("FmiAPIService",["$http",function(o){this.requestTifs=function(e,a){var r={method:"POST",url:"http://localhost:8088/radar",data:{apikey:e,query:a}};return o(r).then(function(o){return console.log(o),o.data})}}]),NoahsApp.service("PumpService",["$http",function(o){this.createPumpMarkers=function(o){for(var e=[],a=0;a<o.length;a++){var r=o[a],t=L.marker([r.latidute,r.longitude]).bindPopup("Pumppu "+r.id).openPopup();e.push(t)}return e},this.fetchPumpData=function(){var e={method:"POST",url:"http://10.144.72.11",data:{apikey:apikey,query:query}};return o(e).then(function(o){return console.log(o),o.data})["catch"](function(o){return console.log("Calling API produced an error:"),console.log(o.data.message),[]})}}]),NoahsApp.controller("MainController",["$scope","FmiAPIService",function(o,e){o.apierror={},o.api_field="5c2fc68e-d165-45f5-af8f-ce9fc0b36e68",o.query_field="/wfs?request=GetFeature&storedquery_id=fmi::radar::composite::rr",o.fmilink="",o.tiflinks=[],o.sendRequest=function(){e.requestTifs(o.api_field,o.query_field).then(function(e){console.log("Got result"),console.log(e),o.fmilink=e.fmilink,o.tiflinks=e.tiflinks,o.apierror={}})["catch"](function(e){console.log(e.data.message),o.apierror=e.data,console.log(o.apierror)})},o.generateMap=function(o){},o.checkIfErrorUndefined=function(){return"undefined"==typeof o.apierror.message}}]),NoahsApp.controller("MapController",["$scope",function(o){function e(o,e){var a="+proj=utm +zone=35 +ellps=GRS80 +units=m +no_defs +towgs84=0,0,0,-0,-0,-0,0",r="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",t=proj4(a,r,[o,e]);return t}var a=new L.Proj.CRS.TMS("EPSG:3067","+proj=utm +zone=35 +ellps=GRS80 +units=m +towgs84=0,0,0,-0,-0,-0,0 +no_defs",[-548576,6291456,1548576,8388608],{resolutions:[8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1,.5,.25]}),r=new L.Map("map",{crs:a,continuousWorld:!0,worldCopyJump:!1,zoomControl:!0,layers:[]}),t="https://{s}.kapsi.fi/mapcache/peruskartta_3067/{z}/{x}/{y}.png",p='&copy; Karttamateriaali <a href="http://www.maanmittauslaitos.fi/avoindata">Maanmittauslaitos</a>',n=new L.Proj.TileLayer.TMS(t,a,{maxZoom:14,minZoom:0,tileSize:256,tms:!1,continuousWorld:!0,attribution:p,subdomains:["tile1","tile2"]});console.log(e(7907751.537,-118331.366)),console.log(e(-118331.366,7907751.537)),console.log(e(875567.732,7907751.537)),console.log(e(875567.732,6335621.167)),console.log(e(-118331.366,6335621.167)),console.log(e(-118331.366,7907751.537));var l="/img/sade-tutka.png",i=[[57.01073316247846,35.67170826858529],[70.49988067141419,8.5139235307523]];L.imageOverlay(l,i).addTo(r),r.addLayer(n),r.setView([65.01275,25.46815],2);var u=L.marker([10.2139235307523,70.49988067141419]).bindPopup("Oikea tuppi").openPopup(),s=L.marker([70.49988067141419,37.37170826858529]).bindPopup("Vasen yl채kulma").openPopup(),m=L.marker([57.01073316247846,10.2139235307523]).bindPopup("Oikea alakulma").openPopup(),c=L.marker([57.01073316247846,37.37170826858529]).bindPopup("Vasen alakulma").openPopup(),d=L.marker([63.1,23.82]).bindPopup("Vimpelin tutka-asema").openPopup(),f=L.marker([64.77,26.32]).bindPopup("Utaj채rven tutka-asema").openPopup(),P=L.marker([62.3,25.44]).bindPopup("Pet채j채veden tutka-asema").openPopup(),h=L.marker([62.86,27.38]).bindPopup("Kuopion tutka-asema").openPopup(),k=L.marker([61.91,29.8]).bindPopup("Kiteen tutka-asema").openPopup(),g=L.marker([65.01275,25.56815]).bindPopup("<a target='_blank' href='https://google.com'>I am a popup.</a>").openPopup(),v=L.marker([65.01275,25.46815]).bindPopup("<a target='_blank' href='https://google.com'>I am a popup.</a>").openPopup(),y=L.layerGroup([u,s,m,c,d,f,P,h,k,g,v]);L.circle([65.01275,25.46815],500,{color:"red",fillColor:"#f03",fillOpacity:.5}).addTo(r);y.addTo(r)}]),NoahsApp.directive("navDirective",function(){return{templateUrl:"app/components/nav/nav.html"}}),NoahsApp.controller("PumpController",["$scope","$stateParams","PumpService",function(o,e,a){o.id=e.id}]);
//# sourceMappingURL=app.min.js.map
