{"version":3,"sources":["app.min.js"],"names":["NoahsApp","angular","module","config","$stateProvider","$urlRouterProvider","console","log","otherwise","state","url","templateUrl","controller","controllerAs","$scope","conversion","a","b","firstProjection","secondProjection","coordinates","proj4","name","crs","L","Proj","CRS","TMS","resolutions","mymap","Map","continuousWorld","worldCopyJump","zoomControl","layers","tileUrl","attrib","tilelayer","TileLayer","maxZoom","minZoom","tileSize","tms","attribution","subdomains","tutkakuvaUrl","tutkakuvaBounds","imageOverlay","addTo","addLayer","setView","joku","marker","bindPopup","openPopup","layerGroup","circle","color","fillColor","fillOpacity","service","$http","this","requestTifs","apikey","query","method","data","then","result","err","message","FmiAPIService","api_field","query_field","fmilink","tiflinks","sendRequest"],"mappings":"AAAA,GAAIA,UAAWC,QAAQC,OAAO,YAAa,aAE3CF,UAASG,QAAQ,iBAAkB,qBAAsB,SAASC,EAAgBC,GAChFC,QAAQC,IAAI,UACZF,EAAmBG,UAAU,KAE7BJ,EACGK,MAAM,QACLC,IAAK,IACLC,YAAa,gCACbC,WAAY,iBACZC,aAAc,SAEfJ,MAAM,QACLC,IAAK,QACLC,YAAa,sCACbC,WAAY,oBACZC,aAAc,eAIpBb,SAASY,WAAW,qBAAsB,SAAU,SAASE,GAI3D,QAASC,GAAWC,EAAGC,GACrB,GAAIC,GAAkB,8EAClBC,EAAmB,mDACnBC,EAAcC,MAAMH,EAAiBC,GAAmBH,EAAGC,GAC/D,OAAOG,GAPTd,QAAQC,IAAI,+BACZO,EAAOQ,KAAO,cASdhB,QAAQC,IAAIQ,EAAW,WAAY,aAEnC,IAAIQ,GAAM,GAAIC,GAAEC,KAAKC,IAAIC,IAAI,YAC3B,+EAAgF,QAAW,QAAW,QAAW,UAC/GC,aACE,KACA,KACA,KACA,KACA,IACA,IACA,IACA,GACA,GACA,GACA,EACA,EACA,EACA,EACA,GACA,OAIFC,EAAQ,GAAIL,GAAEM,IAAI,OACpBP,IAAKA,EACLQ,iBAAiB,EACjBC,eAAe,EACfC,aAAa,EACbC,YAGEC,EAAU,iEACVC,EAAS,oGACTC,EAAY,GAAIb,GAAEC,KAAKa,UAAUX,IAAIQ,EAASZ,GAC9CgB,QAAS,GACTC,QAAS,EACTC,SAAU,IACVC,KAAK,EACLX,iBAAiB,EACjBY,YAAaP,EACbQ,YAAa,QAAS,WAOtBC,EAAe,sBACfC,IACD,kBAAmB,mBACnB,kBAAmB,mBAGtBtB,GAAEuB,aAAaF,EAAcC,GAAiBE,MAAMnB,GAEpDA,EAAMoB,SAASZ,GACfR,EAAMqB,SAAS,SAAU,UAAW,GAOpC,IAAIC,GAAO3B,EAAE4B,QAAQ,SAAU,WAAWC,UAAU,mBAAmBC,WAEvD9B,GAAE+B,YAAYJ,IAEjB3B,EAAEgC,QAAQ,SAAU,UAAW,KAC1CC,MAAO,MACPC,UAAW,OACXC,YAAa,KACZX,MAAMnB,EAETsB,GAAKH,MAAMnB,MAGb7B,SAAS4D,QAAQ,iBAAkB,QAAS,SAASC,GACnDC,KAAKC,YAAc,SAASC,EAAQC,GAClC,GAAI9D,IACF+D,OAAQ,OACRxD,IAAK,8BACLyD,MACEH,OAAQA,EACRC,MAAOA,GAGX,OAAOJ,GAAM1D,GACViE,KAAK,SAASC,GAEb,MADA/D,SAAQC,IAAI8D,GACLA,EAAOF,OAHXN,SAKE,SAASS,GAGd,MAFAhE,SAAQC,IAAI,kCACZD,QAAQC,IAAI+D,EAAIH,KAAKI,kBAM7BvE,SAASY,WAAW,kBAAmB,SAAU,gBAAiB,SAASE,EAAQ0D,GACjF1D,EAAO2D,UAAY,uCACnB3D,EAAO4D,YAAc,mEACrB5D,EAAO6D,QAAU,OACjB7D,EAAO8D,YACP9D,EAAO+D,YAAc,WACnBL,EACCT,YAAYjD,EAAO2D,UAAW3D,EAAO4D,aACrCN,KAAK,SAASC,GACbvD,EAAO6D,QAAUN,EAAOM,QACxB7D,EAAO8D,SAAWP,EAAOO","file":"app.min.js","sourcesContent":["var NoahsApp = angular.module(\"NoahsApp\", [\"ui.router\"]);\n\nNoahsApp.config([\"$stateProvider\", \"$urlRouterProvider\", function($stateProvider, $urlRouterProvider) {\r\n  console.log(\"heippa\");\r\n  $urlRouterProvider.otherwise(\"/\");\r\n\r\n  $stateProvider\r\n    .state(\"main\", {\r\n      url: \"/\",\r\n      templateUrl: \"app/components/main/main.html\",\r\n      controller: \"MainController\",\r\n      controllerAs: \"main\"\r\n    })\r\n    .state(\"leaf\", {\r\n      url: \"/leaf\",\r\n      templateUrl: \"app/components/leaflet/leaflet.html\",\r\n      controller: \"LeafletController\",\r\n      controllerAs: \"leaflet\"\r\n    })\r\n}])\r\n\nNoahsApp.controller(\"LeafletController\", [\"$scope\", function($scope) {\r\n  console.log(\"test controllerissa filussa\");\r\n  $scope.name = \"olen testiä\";\r\n\r\n  function conversion(a, b) {\r\n    var firstProjection = \"+proj=utm +zone=35 +ellps=GRS80 +units=m +no_defs +towgs84=0,0,0,-0,-0,-0,0\";\r\n    var secondProjection = \"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs\";\r\n    var coordinates = proj4(firstProjection, secondProjection, [a, b]);\r\n    return coordinates;\r\n  }\r\n\r\n  console.log(conversion(875567.732, 6335621.167));\r\n\r\n  var crs = new L.Proj.CRS.TMS('EPSG:3067',\r\n    '+proj=utm +zone=35 +ellps=GRS80 +units=m +towgs84=0,0,0,-0,-0,-0,0 +no_defs', [-548576.0, 6291456.0, 1548576.0, 8388608], {\r\n      resolutions: [\r\n        8192,\r\n        4096,\r\n        2048,\r\n        1024,\r\n        512,\r\n        256,\r\n        128,\r\n        64,\r\n        32,\r\n        16,\r\n        8,\r\n        4,\r\n        2,\r\n        1,\r\n        0.5,\r\n        0.25\r\n      ]\r\n    });\r\n\r\n  var mymap = new L.Map('map', {\r\n    crs: crs,\r\n    continuousWorld: true,\r\n    worldCopyJump: false,\r\n    zoomControl: true,\r\n    layers: []\r\n  });\r\n\r\n  var tileUrl = 'https://{s}.kapsi.fi/mapcache/peruskartta_3067/{z}/{x}/{y}.png';\r\n  var attrib = '&copy; Karttamateriaali <a href=\"http://www.maanmittauslaitos.fi/avoindata\">Maanmittauslaitos</a>';\r\n  var tilelayer = new L.Proj.TileLayer.TMS(tileUrl, crs, {\r\n      maxZoom: 14,\r\n      minZoom: 0,\r\n      tileSize: 256,\r\n      tms: false,\r\n      continuousWorld: true,\r\n      attribution: attrib,\r\n      subdomains: ['tile1', 'tile2']\r\n    });\r\n\r\n  // var tutkalayer = new L.tileLayer(\"/img/sade-tutka.png\", {\r\n  //   attribution: \"tutka kartta\"\r\n  // }).addTo(mymap);\r\n\r\n  var tutkakuvaUrl = '/img/sade-tutka.png';\r\n  var tutkakuvaBounds = [\r\n    [70.49988067141419, 10.2139235307523],\r\n    [57.01073316247846, 33.18909488231688]\r\n  ];\r\n\r\n  L.imageOverlay(tutkakuvaUrl, tutkakuvaBounds).addTo(mymap);\r\n\r\n  mymap.addLayer(tilelayer);\r\n  mymap.setView([65.01275, 25.46815], 11);\r\n\r\n  function addMarker(a, b) {\r\n    var coord = conversion(a, b);\r\n    var markern = L.marker([coord[1], coord[0]]).addTo(mymap);\r\n  }\r\n\r\n  var joku = L.marker([65.01275, 25.46815]).bindPopup('Tämä on paikka.').openPopup();\r\n\r\n  var jokuryhma = L.layerGroup([joku]);\r\n\r\n  var circle = L.circle([65.01275, 25.46815], 500, {\r\n    color: 'red',\r\n    fillColor: '#f03',\r\n    fillOpacity: 0.5\r\n  }).addTo(mymap);\r\n\r\n  joku.addTo(mymap);\r\n}])\r\n\nNoahsApp.service(\"FmiAPIService\", [\"$http\", function($http) {\r\n  this.requestTifs = function(apikey, query) {\r\n    var config = {\r\n      method: \"POST\",\r\n      url: \"http://localhost:8088/radar\",\r\n      data: {\r\n        apikey: apikey,\r\n        query: query,\r\n      }\r\n    }\r\n    return $http(config)\r\n      .then(function(result) {\r\n        console.log(result);\r\n        return result.data;\r\n      })\r\n      .catch(function(err) {\r\n        console.log(\"Calling API produced an error:\");\r\n        console.log(err.data.message);\r\n        return [];\r\n      })\r\n  }\r\n}]);\r\n\nNoahsApp.controller(\"MainController\", [\"$scope\", \"FmiAPIService\", function($scope, FmiAPIService) {\r\n  $scope.api_field = \"5c2fc68e-d165-45f5-af8f-ce9fc0b36e68\";\r\n  $scope.query_field = \"/wfs?request=GetFeature&storedquery_id=fmi::radar::composite::rr\";\r\n  $scope.fmilink = \"asdf\";\r\n  $scope.tiflinks = [];\r\n  $scope.sendRequest = function() {\r\n    FmiAPIService\r\n    .requestTifs($scope.api_field, $scope.query_field)\r\n    .then(function(result) {\r\n      $scope.fmilink = result.fmilink;\r\n      $scope.tiflinks = result.tiflinks;\r\n    })\r\n  }\r\n}])\r\n"]}